!function(){function t(t){return t&&t.__esModule?t.default:t}var e={};var n=function(t){var n=e[t];if(null==n)throw new Error("Could not resolve bundle with id "+t);return n};(function(t){for(var n=Object.keys(t),o=0;o<n.length;o++)e[n[o]]=t[n[o]]})(JSON.parse('{"3PAIj":"index.1d1402d2.js","5ILLM":"ball_8.6a0ed354.png","1bPlU":"ball_16.7dc94788.png","3Is0U":"table.a17d2cdc.png"}'));class o{constructor(t=0,e=0){this.x=t,this.y=e}static distance(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}distance(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}static distanceSq(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)}magnitude(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}normalize(){let t=this.magnitude();return this.x/=t,this.y/=t,this}static add(t,e){return new o(t.x+e.x,t.y+e.y)}add(t){this.x+=t.x,this.y+=t.y}static subtract(t,e){return new o(t.x-e.x,t.y-e.y)}subtract(t){return new o(this.x-t.x,this.y-t.y)}static divide(t,e){return new o(t.x/e.x,t.y/e.y)}static multiply(t,e){return new o(t.x*e.x,t.y*e.y)}multiply(t){return new o(this.x*t.x,this.y*t.y)}static scale(t,e){return new o(t.x*e,t.y*e)}scale(t){return new o(this.x*t,this.y*t)}static dot(t,e){return t.x*e.x+t.y*e.y}dot(t){return this.x*t.x+this.y*t.y}}var i=null;var s,r=function(){return i||(i=function(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(t)return(""+t[0]).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}return"/"}()),i},a=n;function l(t){if(""===t)return".";var e="/"===t[t.length-1]?t.slice(0,t.length-1):t,n=e.lastIndexOf("/");return-1===n?".":e.slice(0,n)}function c(t,e){if(t===e)return"";var n=t.split("/");"."===n[0]&&n.shift();var o,i,s=e.split("/");for("."===s[0]&&s.shift(),o=0;(o<s.length||o<n.length)&&null==i;o++)n[o]!==s[o]&&(i=o);var r=[];for(o=0;o<n.length-i;o++)r.push("..");return s.length>i&&r.push.apply(r,s.slice(i)),r.join("/")}(s=function(t,e){return c(l(a(t)),a(e))})._dirname=l,s._relative=c;var u=t(r()+s("3PAIj","5ILLM")),y=t(r()+s("3PAIj","1bPlU")),p=t(r()+s("3PAIj","3Is0U"));function d(t,e,n,o,i,s,r){const a=h(t,e,i,s,r),l=h(n,o,i,s,r);if(a||l)return!0;let c=t-n,u=e-o;const y=Math.sqrt(c*c+u*u),p=((i-t)*(n-t)+(s-e)*(o-e))/Math.pow(y,2),d=t+p*(n-t),x=e+p*(o-e);if(!function(t,e,n,o,i,s){const r=f(i,s,t,e),a=f(i,s,n,o),l=f(t,e,n,o),c=.1;if(r+a>=l-c&&r+a<=l+c)return!0;return!1}(t,e,n,o,d,x))return!1;c=d-i,u=x-s;return Math.sqrt(c*c+u*u)<=r}function h(t,e,n,o,i){const s=t-n,r=e-o;return Math.sqrt(s*s+r*r)<=i}function f(t,e,n,o){return Math.sqrt((t-n)*(t-n)+(e-o)*(e-o))}const x=document.createElement("canvas"),w=x.getContext("2d"),v=1030,b=590,m=14;if(x.width=v,x.height=b,document.body.appendChild(x),!w)throw new Error("can't init 2d renderer");const g={ball_8:{src:u,sprite:null},ball_16:{src:y,sprite:null},table:{src:p,sprite:null}},_=[],M=[{x:59,y:59,r:32},{x:59,y:531,r:32},{x:971,y:59,r:32},{x:971,y:531,r:32},{x:515,y:50,r:25},{x:515,y:540,r:25}],P=[[82,50,106,74],[106,74,475,74],[475,74,489,50],[540,50,554,74],[554,74,922,74],[922,74,946,50],[979,83,955,107],[955,107,955,482],[955,482,979,506],[946,539,922,515],[922,515,554,515],[554,515,540,539],[489,539,475,515],[475,515,106,515],[106,515,84,539],[50,506,74,482],[74,482,74,108],[74,108,50,84]];let I=Date.now();const E=()=>{{requestAnimationFrame(E);const t=Date.now(),e=t-I;I=t,(()=>{w.clearRect(0,0,x.width,x.height),w.drawImage(g.table.sprite,0,0,v,b),w.strokeStyle="#fff";for(const t of _)w.drawImage(g[t.spriteName].sprite,t.l,t.t,28,28);H.pressed&&(w.strokeStyle="#fff",w.beginPath(),w.moveTo(q.position.x,q.position.y),w.lineTo(q.position.x+(H.x1-H.x2),q.position.y+(H.y1-H.y2)),w.closePath(),w.stroke())})(),(t=>{t:for(let e=1;e<=10;e++)for(const n of _){const i=t/10*e/1e3;new o(n.position.x,n.position.y),n.position.add(o.scale(n.velocity,i));for(const{x:t,y:e,r:i}of M)if(o.distance(n.position,new o(t,e))<=i-8){n.destroy=!0;break t}const s=new o,r=[];for(const[t,e,i,a]of P)if(d(t,e,i,a,n.position.x,n.position.y,m)){r.push([t,e,i,a]);const n=new o(a-e,-(i-t)).normalize();s.add(n)}if(s.x||s.y){s.normalize();const t=2*o.dot(n.velocity,s),e=o.subtract(n.velocity,o.scale(s,t));for(n.velocity=e;r.some((([t,e,o,i])=>d(t,e,o,i,n.position.x,n.position.y,m)));)n.position.add(o.scale(n.velocity,.01))}for(const t of _)if(n!==t&&!n.collisionProcessed&&!t.collisionProcessed&&o.distance(n.position,t.position)<28){const[e,i,s,r]=j(n.position.x,n.position.y,n.velocity.x,n.velocity.y,t.position.x,t.position.y,t.velocity.x,t.velocity.y);for(n.velocity=new o(e,i),t.velocity=new o(s,r);o.distance(n.position,t.position)<28;)n.position.add(o.scale(n.velocity,.01)),t.position.add(o.scale(t.velocity,.01));n.collisionProcessed=!0,t.collisionProcessed=!0}n.velocity.add(n.acceleration),n.velocity.magnitude()<.001&&(n.velocity.x=0,n.velocity.y=0),n.acceleration=new o,n.acceleration.add(o.scale(n.velocity,-.001))}for(const t of _)t.collisionProcessed=!1,t.destroy&&_.splice(_.indexOf(t),1)})(e)}};let q;class A{destroy=!1;collisionProcessed=!1;constructor(t,e,n){this.position=new o(t,e),this.spriteName=n,this.velocity=new o,this.acceleration=new o}get l(){return this.position.x-m}get r(){return this.position.x+m}get t(){return this.position.y-m}get b(){return this.position.y+m}}Promise.all(Object.keys(g).map((t=>new Promise(((e,n)=>{const o=new Image;o.onload=()=>{g[t].sprite=o,e()},o.onerror=()=>{n()},o.src=g[t].src}))))).then((()=>{_.push(new A(708,295,"ball_8")),_.push(new A(736,281,"ball_8")),_.push(new A(736,309,"ball_8")),_.push(new A(764,295,"ball_8")),_.push(new A(764,267,"ball_8")),_.push(new A(764,323,"ball_8")),_.push(new A(792,281,"ball_8")),_.push(new A(792,253,"ball_8")),_.push(new A(792,337,"ball_8")),_.push(new A(792,309,"ball_8")),q=new A(294,295,"ball_16"),_.push(q),E()}));const j=(t,e,n,o,i,s,r,a,l=(i-=t)*i+(s-=e)*s,c=n*i+o*s-r*i-a*s)=>[n-(i*=c/l),o-(c*=s/l),r+i,a+c];let H={pressed:!1,x1:0,y1:0,x2:0,y2:0};document.addEventListener("mousedown",(t=>{H.pressed=!0,H.x1=t.pageX,H.y1=t.pageY,H.x2=t.pageX,H.y2=t.pageY})),document.addEventListener("mouseup",(()=>{H.pressed=!1;const t=new o(H.x1-H.x2,H.y1-H.y2);q.velocity=t})),document.addEventListener("mousemove",(t=>{H.x2=t.pageX,H.y2=t.pageY}))}();
//# sourceMappingURL=index.1d1402d2.js.map
